{
  "products": [
    {
      "name": "deploy-arch-ibm-ocp-vpc",
      "label": "Cloud automation for Red Hat OpenShift Container Platform on VPC",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "containers",
        "converged_infra"
      ],
      "keywords": [
        "terraform",
        "ocp",
        "cluster",
        "red_hat_openshift"
      ],
      "short_description": "Automates the deployment of Red Hat OpenShift container platform on IBM Cloud with optional integration of security and logging services.",
      "long_description": "The Cloud automation for Red Hat OpenShift Container Platform on VPC enables a scalable and flexible cloud environment for containerized applications with seamless integration to other security and observability services. This architecture can be deployed independently while also serving as a foundational deployable architecture for other architectures like [Cloud automation for Red Hat OpenShift AI](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-ocp-ai-ba708aed-bb8a-4ac0-83a7-53a066701db5-global) to deploy mission critical applications and AI-driven initiatives to market quickly and securely with a managed OpenShift service.\n\nℹ️ This Terraform-based automation is part of a broader suite of IBM-maintained Infrastructure as Code (IaC) assets, each following the naming pattern \"Cloud automation for *servicename*\" and focusing on single IBM Cloud service. These single-service deployable architectures can be used on their own to streamline and automate service deployments through an [IaC approach](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-understanding-projects), or assembled together into a broader [automated IaC stack](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-config-stack) to automate the deployment of an end-to-end solution architecture.",
      "offering_docs_url": "https://github.com/terraform-ibm-modules/terraform-ibm-base-ocp-vpc/blob/main/README.md",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-base-ocp-vpc/main/images/ocp_icon.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Red Hat OpenShift Cluster",
          "description": "Creates a [Red Hat OpenShift Cluster](https://cloud.ibm.com/docs/openshift) on IBM Cloud that helps businesses manage their containerized applications at scale with added enterprise features such as security, scalability, and automation."
        },
        {
          "title": "Worker pools",
          "description": "Configures worker pools in cluster through which you can group and manage [worker nodes](https://cloud.ibm.com/docs/openshift?topic=openshift-add-workers-vpc) of similar configurations, such as compute resources and availability zones."
        },
        {
          "title": "Access Endpoints",
          "description": "Offers support for [private and public endpoints](https://cloud.ibm.com/docs/openshift?topic=openshift-access_cluster) to connect to the cluster. If the cluster is accessed only by applications running on IBM Cloud, the private endpoint can be enabled for enhanced security."
        },
        {
          "title": "Ingress Controller",
          "description": "Sets up the [ingress controller](https://cloud.ibm.com/docs/openshift?topic=openshift-ingress-configure) for the cluster, responsible for routing external traffic to the appropriate services within the cluster."
        },
        {
          "title": "Object Storage",
          "description": "Creates and configures an [Object Storage bucket](https://cloud.ibm.com/docs/openshift?topic=openshift-storage-cos-understand) which acts as OpenShift internal registry storage. You can provide an existing COS Instance or use the [Cloud automation for Object Storage](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-cos-68921490-2778-4930-ac6d-bae7be6cd958-global) for creating a new instance."
        },
        {
          "title": "KMS Encryption",
          "description": "Optionally you can enable key management services(KMS) [encryption](https://cloud.ibm.com/docs/openshift?topic=openshift-encryption-secrets) of the Kubernetes Secrets and Object Storage bucket using either a newly created key or an existing one."
        },
        {
          "title": "Secrets Manager",
          "description": "Optional integration with [Cloud automation for Secrets Manager](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-secrets-manager-6d6ebc76-7bbd-42f5-8bc7-78f4fabd5944-global) for centrally managing Ingress subdomain certificates."
        },
        {
          "title": "Observability",
          "description": "This solution can leverage [Cloud automation for Observability](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-observability-a3137d28-79e0-479d-8a24-758ebd5a0eab-global) that supports configuring resources for logging, monitoring and activity tracker event routing (optional)."
        },
        {
          "title": "Kube Audit",
          "description": "Deploys the Kube Audit solution to monitor and log Kubernetes API server activity. It captures events such as user actions, configuration changes, and access attempts, helping meet security and compliance requirements through centralized [audit logging](https://cloud.ibm.com/docs/containers?topic=containers-health-audit#audit-api-server)."
        }
      ],
      "support_details": "This product is in the community registry, as such support is handled through the originated repo. If you experience issues, please open an issue in the repository [here](https://github.com/terraform-ibm-modules/terraform-ibm-base-ocp-vpc/issues). Please note this product is not supported via the IBM Cloud Support Center.",
      "flavors": [
        {
          "label": "QuickStart",
          "name": "quickstart",
          "index": 1,
          "install_type": "fullstack",
          "working_directory": "solutions/quickstart",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "CIS IBM Cloud Foundations Benchmark v1.1.0",
                "profile_version": "1.1.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "service_name": "containers-kubernetes",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "notes": "Required to reset the cluster API key, create and edit the OpenShift cluster, and manage all related resources."
            },
            {
              "service_name": "iam-identity",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator",
                "crn:v1:bluemix:public:iam-identity::::serviceRole:UserApiKeyCreator"
              ],
              "notes": "Required to create the cluster API key needed by the OpenShift cluster on IBM Cloud and for managing and operating resources within the IBM Cloud environment."
            },
            {
              "service_name": "is.vpc",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "Required for creating Virtual Private Cloud (VPC)."
            },
            {
                "service_name": "cloud-object-storage",
                "role_crns": [
                    "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                    "crn:v1:bluemix:public:iam::::role:Editor"
                ],
                "notes": "Required for creating the OpenShift cluster's internal registry storage bucket."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "service_name": "Resource group only",
              "notes":"Viewer access is required in the resource group you want to provision in."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configures QuickStart deployment of a Red Hat OpenShift cluster within an IBM Cloud VPC with limited options."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Red Hat OpenShift cluster topology - Quickstart",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-base-ocp-vpc/refs/heads/main/reference-architecture/deployable-architecture-ocp-cluster-qs.svg",
                  "type": "image/svg+xml"
                },
                "description": "This QuickStart variation of deployable architecture enables deployment of a <b>Red Hat OpenShift cluster</b> within an IBM Cloud Virtual Private Cloud (VPC). It provisions the OpenShift cluster and its foundational VPC infrastructure with a limited set of essential options for rapid and streamlined setup. Additionally, the deployment creates an <b>Object Storage bucket</b> that serves as the internal container image registry for the OpenShift cluster. Thus, it helps ensure seamless storage integration.<br><br>Users can select from predefined cluster sizes — <b>mini (default), small, medium, and large.</b> Each size determining the number of availability zones, worker nodes per zone, and the <b>machine type</b> (worker node flavor). [Learn more](https://github.com/terraform-ibm-modules/terraform-ibm-base-ocp-vpc/blob/main/solutions/quickstart/DA_docs.md).<br><br>By default, the architecture provisions a <b>two-zone VPC</b>, forming the foundation for the OpenShift cluster. The cluster comprises a single worker pool distributed across these zones, with <b>two worker nodes per zone</b> in the mini configuration.<br><br>This streamlined architecture balances ease of use with flexibility, enabling rapid OpenShift cluster deployments with the infrastructure, integrated storage services, and right-sized compute resources of IBM Cloud."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "prefix",
              "required": true
            },
            {
              "key": "region",
              "required": true,
              "type": "string",
              "custom_config": {
                "config_constraints": {
                  "generationType": "2"
                },
                "grouping": "deployment",
                "original_grouping": "deployment",
                "type": "vpc_region"
              }
            },
            {
              "key": "size",
              "required": true,
              "options": [
                {
                  "displayname": "mini",
                  "value": "mini"
                },
                {
                  "displayname": "small",
                  "value": "small"
                },
                {
                  "displayname": "medium",
                  "value": "medium"
                },
                {
                  "displayname": "large",
                  "value": "large"
                }
              ]
            },
            {
              "key": "provider_visibility",
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ],
              "hidden": true
            },
            {
              "key": "cluster_name"
            },
            {
              "key": "ocp_version",
              "default_value": "4.18",
              "required": true,
              "options": [
                {
                  "displayname": "4.18",
                  "value": "4.18"
                },
                {
                  "displayname": "4.17",
                  "value": "4.17"
                },
                {
                  "displayname": "4.16",
                  "value": "4.16"
                },
                {
                  "displayname": "4.15",
                  "value": "4.15"
                },
                {
                  "displayname": "4.14",
                  "value": "4.14"
                }
              ]
            },
            {
              "key": "default_worker_pool_operating_system",
              "options": [
                {
                  "displayname": "RHEL 9",
                  "value": "RHEL_9_64"
                },
                {
                  "displayname": "Red Hat CoreOS",
                  "value": "RHCOS"
                },
                {
                  "displayname": "RHEL 8",
                  "value": "REDHAT_8_64"
                }
              ]
            },
            {
              "key": "address_prefix",
              "hidden": true
            },
            {
              "key": "ocp_entitlement"
            },
            {
              "key": "access_tags",
              "hidden":true,
              "custom_config": {
                "type": "array",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "disable_public_endpoint"
            },
            {
              "key": "disable_outbound_traffic_protection"
            }
          ]
        }
      ]
    }
  ]
}
