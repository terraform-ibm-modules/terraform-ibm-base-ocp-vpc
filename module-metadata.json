{
  "path": ".",
  "variables": {
    "access_tags": {
      "name": "access_tags",
      "type": "list(string)",
      "description": "A list of access tags to apply to the cluster, see https://cloud.ibm.com/docs/account?topic=account-access-tags-tutorial for more details",
      "default": [],
      "source": [
        "ibm_resource_tag.cluster_access_tag.count",
        "ibm_resource_tag.cluster_access_tag.tags",
        "ibm_resource_tag.cos_access_tag.tags"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 168
      },
      "min_length": 1,
      "max_length": 128,
      "matches": "^[A-Za-z0-9:_ .-]+$",
      "computed": true,
      "elem": {
        "type": "TypeString"
      }
    },
    "cluster_name": {
      "name": "cluster_name",
      "type": "string",
      "description": "The name that will be assigned to the provisioned cluster",
      "required": true,
      "source": [
        "ibm_container_vpc_cluster.autoscaling_cluster.name",
        "ibm_container_vpc_cluster.cluster.name"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 29
      },
      "immutable": true
    },
    "cluster_ready_when": {
      "name": "cluster_ready_when",
      "type": "string",
      "description": "The cluster is ready when one of the following: MasterNodeReady (not recommended), OneWorkerNodeReady, Normal, IngressReady",
      "default": "IngressReady",
      "source": [
        "ibm_container_vpc_cluster.autoscaling_cluster.wait_till",
        "ibm_container_vpc_cluster.cluster.wait_till"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 90
      }
    },
    "cos_name": {
      "name": "cos_name",
      "type": "string",
      "description": "Name of the COS instance to provision. New instance only provisioned if `use_existing_cos = false`. Default: `\u003ccluster_name\u003e_cos`",
      "pos": {
        "filename": "variables.tf",
        "line": 120
      }
    },
    "disable_public_endpoint": {
      "name": "disable_public_endpoint",
      "type": "bool",
      "description": "Flag indicating that the public endpoint should be enabled or disabled",
      "default": false,
      "source": [
        "ibm_container_vpc_cluster.autoscaling_cluster.disable_public_service_endpoint",
        "ibm_container_vpc_cluster.cluster.disable_public_service_endpoint"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 102
      }
    },
    "existing_cos_id": {
      "name": "existing_cos_id",
      "type": "string",
      "description": "The COS id of an already existing COS instance. Only required if 'use_existing_cos = true'",
      "pos": {
        "filename": "variables.tf",
        "line": 132
      }
    },
    "force_delete_storage": {
      "name": "force_delete_storage",
      "type": "bool",
      "description": "Flag indicating whether or not to delete attached storage when destroying the cluster - Default: false",
      "default": false,
      "source": [
        "ibm_container_vpc_cluster.autoscaling_cluster.force_delete_storage",
        "ibm_container_vpc_cluster.cluster.force_delete_storage"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 114
      }
    },
    "ibmcloud_api_key": {
      "name": "ibmcloud_api_key",
      "type": "string",
      "description": "APIkey that's associated with the account to use, set via environment variable TF_VAR_ibmcloud_api_key",
      "required": true,
      "sensitive": true,
      "pos": {
        "filename": "variables.tf",
        "line": 5
      }
    },
    "ignore_worker_pool_size_changes": {
      "name": "ignore_worker_pool_size_changes",
      "type": "bool",
      "description": "Enable if using worker autoscaling. Stops Terraform managing worker count",
      "default": false,
      "required": true,
      "source": [
        "ibm_container_vpc_cluster.autoscaling_cluster.count",
        "ibm_container_vpc_cluster.cluster.count",
        "ibm_resource_tag.cluster_access_tag.resource_id"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 86
      },
      "min_length": 1,
      "max_length": 1024,
      "matches": "^crn:v1(:[a-zA-Z0-9 \\-\\._~\\*\\+,;=!$\u0026'\\(\\)\\/\\?#\\[\\]@]*){8}$|^[0-9]+$"
    },
    "kms_config": {
      "name": "kms_config",
      "type": "object({\n    crk_id           = string\n    instance_id      = string\n    private_endpoint = optional(bool, true) # defaults to true\n  })",
      "description": "Use to attach a Key Protect instance to the cluster",
      "pos": {
        "filename": "variables.tf",
        "line": 138
      }
    },
    "ocp_entitlement": {
      "name": "ocp_entitlement",
      "type": "string",
      "description": "Value that is applied to the entitlements for OCP cluster provisioning",
      "default": "cloud_pak",
      "source": [
        "ibm_container_vpc_cluster.autoscaling_cluster.entitlement",
        "ibm_container_vpc_cluster.cluster.entitlement"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 108
      }
    },
    "ocp_version": {
      "name": "ocp_version",
      "type": "string",
      "description": "The version of the OpenShift cluster that should be provisioned (format 4.x). This is only used during initial cluster provisioning, but ignored for future updates. If no value is passed, or the string 'latest' is passed, the current latest OCP version will be used.",
      "pos": {
        "filename": "variables.tf",
        "line": 72
      }
    },
    "region": {
      "name": "region",
      "type": "string",
      "description": "The IBM Cloud region where the cluster will be provisioned.",
      "required": true,
      "pos": {
        "filename": "variables.tf",
        "line": 17
      }
    },
    "resource_group_id": {
      "name": "resource_group_id",
      "type": "string",
      "description": "The Id of an existing IBM Cloud resource group where the cluster will be grouped.",
      "required": true,
      "source": [
        "data.ibm_container_cluster_config.cluster_config.resource_group_id",
        "ibm_container_vpc_cluster.autoscaling_cluster.resource_group_id",
        "ibm_container_vpc_cluster.cluster.resource_group_id",
        "ibm_container_vpc_worker_pool.autoscaling_pool.resource_group_id",
        "ibm_container_vpc_worker_pool.pool.resource_group_id",
        "ibm_resource_instance.cos_instance.resource_group_id"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 12
      },
      "cloud_data_type": "resource_group",
      "immutable": true,
      "computed": true,
      "cloud_data_range": [
        "resolved_to:id"
      ]
    },
    "tags": {
      "name": "tags",
      "type": "list(string)",
      "description": "Metadata labels describing this cluster deployment, i.e. test",
      "default": [],
      "source": [
        "ibm_container_vpc_cluster.autoscaling_cluster.tags",
        "ibm_container_vpc_cluster.cluster.tags"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 23
      },
      "min_length": 1,
      "max_length": 128,
      "matches": "^[A-Za-z0-9:_ .-]+$",
      "computed": true,
      "elem": {
        "type": "TypeString"
      }
    },
    "use_existing_cos": {
      "name": "use_existing_cos",
      "type": "bool",
      "description": "Flag indicating whether or not to use an existing COS instance",
      "default": false,
      "source": [
        "ibm_resource_instance.cos_instance.count",
        "ibm_resource_tag.cos_access_tag.count"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 126
      }
    },
    "verify_worker_network_readiness": {
      "name": "verify_worker_network_readiness",
      "type": "bool",
      "description": "By setting this to true, a script will run kubectl commands to verify that all worker nodes can communicate successfully with the master. If the runtime does not have access to the kube cluster to run kubectl commands, this should be set to false.",
      "default": true,
      "source": [
        "data.ibm_container_cluster_config.cluster_config.count",
        "null_resource.confirm_network_healthy.count"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 187
      }
    },
    "vpc_id": {
      "name": "vpc_id",
      "type": "string",
      "description": "Id of the VPC instance where this cluster will be provisioned",
      "required": true,
      "source": [
        "ibm_container_vpc_cluster.autoscaling_cluster.vpc_id",
        "ibm_container_vpc_cluster.cluster.vpc_id",
        "ibm_container_vpc_worker_pool.autoscaling_pool.vpc_id",
        "ibm_container_vpc_worker_pool.pool.vpc_id"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 182
      },
      "immutable": true
    },
    "vpc_subnets": {
      "name": "vpc_subnets",
      "type": "map(list(object({\n    id         = string\n    zone       = string\n    cidr_block = string\n  })))",
      "description": "Metadata that describes the VPC's subnets. Obtain this information from the VPC where this cluster will be created",
      "required": true,
      "pos": {
        "filename": "variables.tf",
        "line": 34
      }
    },
    "worker_pools": {
      "name": "worker_pools",
      "type": "list(object({\n    subnet_prefix     = string\n    pool_name         = string\n    machine_type      = string\n    workers_per_zone  = number\n    resource_group_id = optional(string)\n    labels            = optional(map(string))\n    boot_volume_encryption_kms_config = optional(object({\n      crk             = string\n      kms_instance_id = string\n      kms_account_id  = optional(string)\n    }))\n  }))",
      "description": "List of worker pools",
      "required": true,
      "pos": {
        "filename": "variables.tf",
        "line": 43
      }
    },
    "worker_pools_taints": {
      "name": "worker_pools_taints",
      "type": "map(list(object({ key = string, value = string, effect = string })))",
      "description": "Optional, Map of lists containing node taints by node-pool name",
      "pos": {
        "filename": "variables.tf",
        "line": 60
      }
    }
  },
  "outputs": {
    "cluster_crn": {
      "name": "cluster_crn",
      "description": "CRN for the created cluster",
      "pos": {
        "filename": "outputs.tf",
        "line": 17
      }
    },
    "cluster_id": {
      "name": "cluster_id",
      "description": "ID of cluster created",
      "pos": {
        "filename": "outputs.tf",
        "line": 5
      }
    },
    "cluster_name": {
      "name": "cluster_name",
      "description": "Name of the created cluster",
      "pos": {
        "filename": "outputs.tf",
        "line": 11
      }
    },
    "cos_crn": {
      "name": "cos_crn",
      "description": "CRN of the COS instance",
      "pos": {
        "filename": "outputs.tf",
        "line": 33
      }
    },
    "ingress_hostname": {
      "name": "ingress_hostname",
      "description": "Ingress hostname",
      "pos": {
        "filename": "outputs.tf",
        "line": 53
      }
    },
    "ocp_version": {
      "name": "ocp_version",
      "description": "Openshift Version of the cluster",
      "pos": {
        "filename": "outputs.tf",
        "line": 28
      }
    },
    "private_service_endpoint_url": {
      "name": "private_service_endpoint_url",
      "description": "Private service endpoint URL",
      "pos": {
        "filename": "outputs.tf",
        "line": 58
      }
    },
    "public_service_endpoint_url": {
      "name": "public_service_endpoint_url",
      "description": "Public service endpoint URL",
      "pos": {
        "filename": "outputs.tf",
        "line": 63
      }
    },
    "region": {
      "name": "region",
      "description": "The IBM Cloud region where the cluster will be provisioned.",
      "value": "var.region",
      "pos": {
        "filename": "outputs.tf",
        "line": 43
      },
      "type": "string"
    },
    "resource_group_id": {
      "name": "resource_group_id",
      "description": "Resource group ID the cluster is deployed in",
      "pos": {
        "filename": "outputs.tf",
        "line": 48
      }
    },
    "vpc_id": {
      "name": "vpc_id",
      "description": "ID of the clusters VPC",
      "pos": {
        "filename": "outputs.tf",
        "line": 38
      }
    },
    "workerpools": {
      "name": "workerpools",
      "description": "Worker pools created",
      "pos": {
        "filename": "outputs.tf",
        "line": 23
      }
    }
  },
  "required_core": [
    "\u003e= 1.3.0"
  ],
  "required_providers": {
    "ibm": {
      "source": "ibm-cloud/ibm",
      "version_constraints": [
        "\u003e= 1.49.0"
      ],
      "aliases": [
        {
          "name": "ibm",
          "alias": "access_tags"
        }
      ]
    },
    "null": {
      "version_constraints": [
        "\u003e= 3.2.1"
      ]
    }
  },
  "managed_resources": {
    "ibm_container_vpc_cluster.autoscaling_cluster": {
      "mode": "managed",
      "type": "ibm_container_vpc_cluster",
      "name": "autoscaling_cluster",
      "attributes": {
        "count": "ignore_worker_pool_size_changes",
        "disable_public_service_endpoint": "disable_public_endpoint",
        "entitlement": "ocp_entitlement",
        "force_delete_storage": "force_delete_storage",
        "name": "cluster_name",
        "resource_group_id": "resource_group_id",
        "tags": "tags",
        "vpc_id": "vpc_id",
        "wait_till": "cluster_ready_when"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 121
      }
    },
    "ibm_container_vpc_cluster.cluster": {
      "mode": "managed",
      "type": "ibm_container_vpc_cluster",
      "name": "cluster",
      "attributes": {
        "count": "ignore_worker_pool_size_changes",
        "disable_public_service_endpoint": "disable_public_endpoint",
        "entitlement": "ocp_entitlement",
        "force_delete_storage": "force_delete_storage",
        "name": "cluster_name",
        "resource_group_id": "resource_group_id",
        "tags": "tags",
        "vpc_id": "vpc_id",
        "wait_till": "cluster_ready_when"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 59
      }
    },
    "ibm_container_vpc_worker_pool.autoscaling_pool": {
      "mode": "managed",
      "type": "ibm_container_vpc_worker_pool",
      "name": "autoscaling_pool",
      "attributes": {
        "resource_group_id": "resource_group_id",
        "vpc_id": "vpc_id"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 273
      }
    },
    "ibm_container_vpc_worker_pool.pool": {
      "mode": "managed",
      "type": "ibm_container_vpc_worker_pool",
      "name": "pool",
      "attributes": {
        "resource_group_id": "resource_group_id",
        "vpc_id": "vpc_id"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 232
      }
    },
    "ibm_resource_instance.cos_instance": {
      "mode": "managed",
      "type": "ibm_resource_instance",
      "name": "cos_instance",
      "attributes": {
        "count": "use_existing_cos",
        "resource_group_id": "resource_group_id"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 37
      }
    },
    "ibm_resource_tag.cluster_access_tag": {
      "mode": "managed",
      "type": "ibm_resource_tag",
      "name": "cluster_access_tag",
      "attributes": {
        "count": "access_tags",
        "resource_id": "ignore_worker_pool_size_changes",
        "tags": "access_tags"
      },
      "provider": {
        "name": "ibm",
        "alias": "access_tags"
      },
      "pos": {
        "filename": "main.tf",
        "line": 185
      }
    },
    "ibm_resource_tag.cos_access_tag": {
      "mode": "managed",
      "type": "ibm_resource_tag",
      "name": "cos_access_tag",
      "attributes": {
        "count": "use_existing_cos",
        "tags": "access_tags"
      },
      "provider": {
        "name": "ibm",
        "alias": "access_tags"
      },
      "pos": {
        "filename": "main.tf",
        "line": 47
      }
    },
    "null_resource.confirm_network_healthy": {
      "mode": "managed",
      "type": "null_resource",
      "name": "confirm_network_healthy",
      "attributes": {
        "count": "verify_worker_network_readiness"
      },
      "provider": {
        "name": "null"
      },
      "pos": {
        "filename": "main.tf",
        "line": 333
      }
    },
    "null_resource.reset_api_key": {
      "mode": "managed",
      "type": "null_resource",
      "name": "reset_api_key",
      "provider": {
        "name": "null"
      },
      "pos": {
        "filename": "main.tf",
        "line": 207
      }
    }
  },
  "data_resources": {
    "data.ibm_container_cluster_config.cluster_config": {
      "mode": "data",
      "type": "ibm_container_cluster_config",
      "name": "cluster_config",
      "attributes": {
        "count": "verify_worker_network_readiness",
        "resource_group_id": "resource_group_id"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 221
      }
    },
    "data.ibm_container_cluster_versions.cluster_versions": {
      "mode": "data",
      "type": "ibm_container_cluster_versions",
      "name": "cluster_versions",
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 35
      }
    }
  },
  "module_calls": {}
}
